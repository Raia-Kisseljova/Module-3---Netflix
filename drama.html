<!doctype html>
<html lang="en">
  <head>
   
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="netflixLogin.css">
    <title>Netflix</title>
  </head>

  <style>
      .card{
        width: 220px;
        height: 160px;
        background-color: rgba(0, 0, 0, 0.9);

        text-align: center;
        overflow:hidden;
        border: 10px solid rgba(0, 0, 0, 0.9);
        
      }
      .card img{
          width: 90%;
      }

      .card p{
          width: 170px;
          text-align: left;
          margin: 0 auto;
          font-size: 14px;
      }

      .title{
          color: white;
      }

      
  </style>

  <body>


    
<div class="container-fluid">

    <div class="nav">
        <a href="home.html"><img src="../img/netflix_logo.png"></a>
       
    </div>


<div>
    <h1 class="my-4 title">Drama</h1>


</div>

    <div class="row" id="drama-container">
        

    </div>






  </body>

  
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

  <script>

window.onload = async () =>{
        const url = "https://striveschool-api.herokuapp.com/api/movies/Drama/"
        getDramaMovies(url)
    }

    //     const params = new URLSearchParams(location.search)
    //     const id = params.get('id')
    //     console.log(id)

    //     const method = id ? "PUT" : "POST"

        
    
    // async function getMovieDetails(id) {
    //     try {
    //       const response = await fetch(url + id, {
    //         headers:{
    //             "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGRkYjEwMDg5ZmJmODAwMTU4MWQ0OTUiLCJpYXQiOjE2MjUxNDE1MDQsImV4cCI6MTYyNjM1MTEwNH0.ZdotzUGr0u22PBE390YOfKVoZD5lgYxtPKS6b6gBLIM",
    //             "Content-Type": "application/json"
    //         },
    //       })
    //       const movie = await response.json()
    //       console.log(movie)
    //       console.log(Object.keys(movie))
  
    //       Object.keys(movie).forEach(key => {
    //         const field = document.querySelector(`#${key}`)
    //         if (field) field.value = movie[key]
    //       })
    //     } catch (error) {
    //       alert(error.message)
    //     }

    //   }

    //   getMovieDetails()



    const getDramaMovies = async (url)=>{
        const response = await fetch(url , {
        headers:{
            "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGRkYjEwMDg5ZmJmODAwMTU4MWQ0OTUiLCJpYXQiOjE2MjUxNDE1MDQsImV4cCI6MTYyNjM1MTEwNH0.ZdotzUGr0u22PBE390YOfKVoZD5lgYxtPKS6b6gBLIM",
            "Content-Type": "application/json"
        }
        })
        const dramaMovies = await response.json()
        // console.log(dramaMovies)
        displayDramaMovies(dramaMovies)
    }


    

    const displayDramaMovies = (dramaMovies) =>{
        // console.log(dramaMovies[0].imageUrl)
        let dramaContainer = document.querySelector("#drama-container")
        dramaMovies.forEach(dramaMovie => {
            dramaContainer.innerHTML += `
                <div class = "col mx-0 px-0 gx-0 my-3">
                    <div class = "card">  
                        <a href = "backoffice.html?id=${dramaMovie._id}"><img src = "${dramaMovie.imageUrl}"></a>
                        
                    </div>   
                </div>
            `
        });
    }

      


    


    




  </script>
  <!-- <script href = "backoffice.js"></script> -->
</body>
</html>